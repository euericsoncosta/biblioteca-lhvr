<div class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
  <div>
    <h2 class="text-3xl font-black text-slate-800 dark:text-white tracking-tight">Materiais de RevisÃ£o ðŸ“š</h2>
    <p class="text-slate-500 dark:text-slate-400 font-medium">ConteÃºdos organizados por disciplina, ano e bimestre.</p>
  </div>

  {{#unless (eq user.tipo_usuario 'ALUNO')}}
  <a href="/materiais/novo" class="px-6 py-3 bg-indigo-600 text-white rounded-2xl font-black text-sm shadow-xl hover:bg-indigo-700 transition-all flex items-center gap-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4" />
    </svg>
    Publicar ConteÃºdo
  </a>
  {{/unless}}
</div>

<div class="bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 mb-8">
  <form action="/materiais" method="GET" class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
    
    <div>
      <label class="block text-[10px] font-black uppercase text-slate-400 mb-2 ml-1 tracking-widest">SÃ©rie</label>
      <select name="ano_escolar" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-3 outline-none dark:text-white">
        <option value="">Todas</option>
        <option value="1" {{#if (eq filtros.ano_escolar '1')}}selected{{/if}}>1Âº Ano</option>
        <option value="2" {{#if (eq filtros.ano_escolar '2')}}selected{{/if}}>2Âº Ano</option>
        <option value="3" {{#if (eq filtros.ano_escolar '3')}}selected{{/if}}>3Âº Ano</option>
      </select>
    </div>

    <div>
      <label class="block text-[10px] font-black uppercase text-slate-400 mb-2 ml-1 tracking-widest">Bimestre</label>
      <select name="bimestre" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-3 outline-none dark:text-white">
        <option value="">Todos</option>
        <option value="1" {{#if (eq filtros.bimestre '1')}}selected{{/if}}>1Âº Bimestre</option>
        <option value="2" {{#if (eq filtros.bimestre '2')}}selected{{/if}}>2Âº Bimestre</option>
        <option value="3" {{#if (eq filtros.bimestre '3')}}selected{{/if}}>3Âº Bimestre</option>
        <option value="4" {{#if (eq filtros.bimestre '4')}}selected{{/if}}>4Âº Bimestre</option>
      </select>
    </div>

    <div>
      <label class="block text-[10px] font-black uppercase text-slate-400 mb-2 ml-1 tracking-widest">Disciplina / Curso</label>
      <select name="disciplina" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-3 outline-none dark:text-white">
        <option value="">Todas</option>
        <optgroup label="Base Comum">
          <option value="PortuguÃªs" {{#if (eq filtros.disciplina 'PortuguÃªs')}}selected{{/if}}>PortuguÃªs</option>
          <option value="MatemÃ¡tica" {{#if (eq filtros.disciplina 'MatemÃ¡tica')}}selected{{/if}}>MatemÃ¡tica</option>
        </optgroup>
        <optgroup label="Cursos TÃ©cnicos">
          <option value="Informatica" {{#if (eq filtros.disciplina 'Informatica')}}selected{{/if}}>InformÃ¡tica</option>
          <option value="FinanÃ§as" {{#if (eq filtros.disciplina 'FinanÃ§as')}}selected{{/if}}>FinanÃ§as</option>
          <option value="Enfermagem" {{#if (eq filtros.disciplina 'Enfermagem')}}selected{{/if}}>Enfermagem</option>
          <option value="Agronegocio" {{#if (eq filtros.disciplina 'Agronegocio')}}selected{{/if}}>AgronegÃ³cio</option>
          <option value="SeguranÃ§a do Trabalho" {{#if (eq filtros.disciplina 'SeguranÃ§a do Trabalho')}}selected{{/if}}>SeguranÃ§a do Trabalho</option>
        </optgroup>
      </select>
    </div>

    <div>
      <label class="block text-[10px] font-black uppercase text-slate-400 mb-2 ml-1 tracking-widest">Ano Letivo</label>
      <input type="number" name="ano_referencia" value="{{filtros.ano_referencia}}" placeholder="2024" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl p-3 outline-none dark:text-white">
    </div>

    <button type="submit" class="bg-indigo-600 text-white py-3.5 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg">
      Filtrar
    </button>
  </form>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {{#each materiais}}
  <div class="bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-100 dark:border-slate-700 p-6 shadow-sm hover:shadow-xl transition-all flex flex-col group">
    
    <div class="flex justify-between items-start mb-4">
      <span class="px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg text-[10px] font-black uppercase">
        {{this.disciplina}}
      </span>
      <div class="flex gap-2">
        <span class="px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 rounded text-[9px] font-bold">
          {{this.ano_escolar}}Âº Ano
        </span>
        <span class="px-2 py-1 bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 rounded text-[9px] font-bold">
          {{this.bimestre}}Âº Bim
        </span>
      </div>
    </div>

    <h3 class="text-lg font-black text-slate-800 dark:text-white mb-2 leading-tight group-hover:text-indigo-600 transition-colors">
      {{this.titulo}}
    </h3>

    <p class="text-sm text-slate-500 dark:text-slate-400 mb-6 line-clamp-2 italic">
      {{this.descricao}}
    </p>

    <div class="mt-auto pt-6 border-t border-slate-50 dark:border-slate-700 flex justify-between items-center">
      <span class="text-xs font-bold text-slate-600 dark:text-slate-300">
        Prof. {{this.professor.nome}}
      </span>
      <a href="{{this.link_recurso}}" target="_blank" class="px-5 py-2.5 bg-emerald-600 text-white rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-700 transition-all shadow-sm">
        Aceder
      </a>
    </div>

  </div>
  {{/each}}
</div>